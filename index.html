<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gipfel Lodge — Excel Dashboard</title>

  <!-- App / Favicon icons -->
  <link rel="icon" href="assets/logo/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="96x96" href="assets/logo/favicon-96x96.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/logo/apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">

  <link rel="stylesheet" href="./CSS/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- Excel reader / Chart library -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>

<body>

<!-- ============================================================
     PAGE: HOME
     ============================================================ -->

<main id="home-page" class="page active">

  <header class="top-bar">
    <div class="header-flex">
      <div class="header-titles">
        <h1>Gipfel Lodge</h1>
        <p class="subtitle">Data overzichtelijk gemaakt</p>
      </div>

      <div class="topbar__controls">
        <label class="action-btn" for="fileInputHome">
          <i class="fa-solid fa-file-import"></i>
          <input id="fileInputHome" class="excel-upload" type="file" accept=".xlsx,.xls" hidden />
        </label>
      </div>
    </div>
  </header>

  <!-- ====== KPI-CARDS ====== -->
  <div class="kpi-header">
    <div class="kpi-header__left">
      <h3 class="kpi-header__title">Overzicht</h3>
      <p class="kpi-header__subtitle">Kies een jaar</p>
    </div>

    <div class="year-select-container year-select-container--kpi">
      <div class="custom-select" id="yearSelectContainerKpi">
        <div class="select-trigger">
          <span id="selectedYearDisplayKpi">—</span>
          <i class="fa-solid fa-chevron-down"></i>
        </div>
        <div class="select-options" id="yearOptionsKpi"></div>
        <input type="hidden" id="yearValueKpi" value="">
      </div>
    </div>
  </div>

  <section class="cards-grid">
    <div class="kpi-card">
      <span class="label">Boekingen</span>
      <span id="kpiBookings" class="value">—</span>
    </div>
    <div class="kpi-card">
      <span class="label">Nachten geboekt</span>
      <span id="kpiNights" class="value">—</span>
    </div>

    <div class="kpi-card">
      <span class="label">Eigen boekingen</span>
      <span id="kpiOwnerBookings" class="value">—</span>
    </div>
    <div class="kpi-card">
      <span class="label">Nachten zelf geboekt</span>
      <span id="kpiOwnerNights" class="value">—</span>
    </div>

    <div class="kpi-card">
      <span class="label">% al geboekt (jaar)</span>
      <span id="kpiOccupancyPct" class="value">—</span>
    </div>
    <div class="kpi-card">
      <span class="label">Nachten ongeboekt</span>
      <span id="kpiNightsFree" class="value">—</span>
    </div>

    <div class="kpi-card">
      <span class="label">Omzet (Bruto)</span>
      <span id="kpiGrossRevenue" class="value">—</span>
    </div>
    <div class="kpi-card">
      <span class="label">Gem. bruto / nacht</span>
      <span id="kpiGrossRevPerNight" class="value">—</span>
    </div>

    <div class="kpi-card">
      <span class="label">Omzet (Netto)</span>
      <span id="kpiNetRevenue" class="value">—</span>
    </div>
    <div class="kpi-card">
      <span class="label">Gem. netto / nacht</span>
      <span id="kpiNetRevPerNight" class="value">—</span>
    </div>
  </section>


  <!-- ====== Booking Cards Carousel ====== -->
  <section class="content-section">
    <div class="booking-carousel" id="bookingCarousel" style="display:none;">

      <!-- swipebare track -->
      <div class="booking-carousel__track" id="bookingCarouselTrack">
        <!-- booking slides worden hier dynamisch door JS ingevoegd -->
      </div>

      

    </div>

    <!-- Dots indicator -->
    <div class="booking-scrollbar" id="bookingScrollbar" aria-label="Booking pager">
      <div class="booking-scrollbar__rail">
        <div class="booking-scrollbar__ticks" id="bookingTicks"></div>
        <div class="booking-scrollbar__knob" id="bookingKnob"></div>
      </div>
    </div>


  </section>


  <!-- ====== SEIZOENSINZICHTEN ====== -->
  <section class="content-section">
    <div class="chart-panel">
      <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 class="panel-title" style="margin: 0;">Seizoensinzichten</h3>

        <div class="year-select-container">
          <div class="custom-select" id="yearSelectContainer">
            <div class="select-trigger">
              <span id="selectedYearDisplay">—</span>
              <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="select-options" id="yearOptions"></div>
            <input type="hidden" id="yearValue" value="">
          </div>
        </div>
      </div>

      <div class="season-filter">
        <button class="filter-btn active" data-season="all">Jaar</button>
        <button class="filter-btn" data-season="winter">Winter</button>
        <button class="filter-btn" data-season="spring">Lente</button>
        <button class="filter-btn" data-season="summer">Zomer</button>
        <button class="filter-btn" data-season="autumn">Herfst</button>
      </div>

      <div class="chart-container">
        <canvas id="chartHomeRevenue"></canvas>
      </div>

      <div class="mode-toggle">
        <button id="btnGross" class="toggle-btn active">Bruto</button>
        <button id="btnNet" class="toggle-btn">Netto</button>
      </div>
    </div>
  </section>

  <!-- ====== CUMULATIEVE OMZET ====== -->
  <section class="content-section">
    <div class="chart-panel">

      <div class="panel-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 class="panel-title" style="margin: 0;">Overzicht boekingen</h3>

        <div class="year-select-container">
          <div class="custom-select" id="cumulativeYearSelectContainer">
            <div class="select-trigger">
              <span id="cumulativeYearDisplay">—</span>
              <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="select-options" id="cumulativeYearOptions"></div>
            <input type="hidden" id="cumulativeYearValue" value="">
          </div>
        </div>
      </div>

      <div class="panel__body">
        <div class="chart-scroll" id="cumScrollWrapper">
            <!-- ✅ Sticky y-axis labels (DOM) -->
            <div class="cum-y-axis" id="cumYAxis"></div>

            <div class="chart-scroll__inner" id="cumScrollInner">
                <canvas id="chartCumulative"></canvas>
            </div>
        </div>


        <div class="hint">
            <span class="hint-text">Scroll horizontaal voor details</span>
            <span class="hint-separator">•</span>
            <span class="hint-legend">
                <span class="dot dot-orange"></span>
                <span>Huiseigenaar</span>
            </span>
        </div>
      </div>

    </div>
  </section>

  <div class="container"></div>
</main>

<!-- ============================================================
     PAGE: BEZETTING
     ============================================================ -->

<main id="occupancy-page" class="page">
  <header class="top-bar">
    <div class="header-flex">
      <button class="back-btn" data-nav="home"><i class="fa-solid fa-chevron-left"></i></button>
      <h1>Bezetting</h1>
    </div>
  </header>

  <div class="container">
    <div class="panel">
      <h3 class="panel-title">Vrije nachten per week</h3>
      <canvas id="chartFreeWeeks"></canvas>
    </div>
    <div class="panel">
      <h3 class="panel-title">Gaps (Vrije periodes)</h3>
      <div id="gapsWrap" class="table-wrap"></div>
    </div>
  </div>
</main>

<!-- ============================================================
     PAGE: OMZET
     ============================================================ -->

<main id="revenue-page" class="page">
  <header class="top-bar">
    <div class="header-flex">
      <button class="back-btn" data-nav="home"><i class="fa-solid fa-chevron-left"></i></button>
      <h1>Omzet & Prijs</h1>
    </div>
  </header>

  <div class="container">
    <div class="panel">
      <h3 class="panel-title">Omzet per kanaal</h3>
      <canvas id="chartRevenueChannel"></canvas>
    </div>
  </div>
</main>

<!-- ============================================================
     PAGE: GEDRAG
     ============================================================ -->

<main id="behavior-page" class="page">
  <header class="top-bar">
    <div class="header-flex">
      <button class="back-btn" data-nav="home"><i class="fa-solid fa-chevron-left"></i></button>
      <h1>Gasten Gedrag</h1>
    </div>
  </header>

  <div class="container">
    <div class="panel">
      <h3 class="panel-title">Lead Time (Dagen voor aankomst)</h3>
      <canvas id="chartLeadTime"></canvas>
    </div>
    <div class="panel">
      <h3 class="panel-title">Gezinsverdeling</h3>
      <canvas id="chartGuestPie"></canvas>
    </div>
  </div>
</main>

<!-- ============================================================
     PAGE: DATA
     ============================================================ -->

<main id="data-page" class="page">
  <header class="top-bar">
    <div class="header-flex">
      <button class="back-btn" data-nav="home"><i class="fa-solid fa-chevron-left"></i></button>
      <h1>Data Management</h1>
    </div>
  </header>

  <div class="container">
    <div class="panel upload-zone">
      <h3 class="panel-title">Nieuwe data inladen</h3>
      <label class="upload-btn-full" for="fileInputData">
        <i class="fa-solid fa-cloud-arrow-up"></i>
        <span>Selecteer Excel Bestand</span>
        <input id="fileInputData" class="excel-upload" type="file" accept=".xlsx,.xls,.csv" hidden />
      </label>
    </div>

    <div class="panel">
      <h3 class="panel-title">Systeem Log</h3>
      <pre id="log" class="log">Wachten op bestand...</pre>
    </div>

    <div id="tableWrap" class="table-wrap"></div>
  </div>
</main>

<!-- ============================================================
     BOTTOM NAVIGATION BAR
     ============================================================ -->

<nav class="bottom-nav">
  <div class="nav-item active" id="nav-home" data-nav="home">
    <i class="fa-solid fa-house"></i>
    <span>Home</span>
  </div>
  <div class="nav-item" id="nav-occupancy" data-nav="occupancy">
    <i class="fa-solid fa-calendar-days"></i>
    <span>Bezetting</span>
  </div>
  <div class="nav-item" id="nav-revenue" data-nav="revenue">
    <i class="fa-solid fa-euro-sign"></i>
    <span>Omzet</span>
  </div>
  <div class="nav-item" id="nav-behavior" data-nav="behavior">
    <i class="fa-solid fa-chart-pie"></i>
    <span>Gedrag</span>
  </div>
  <div class="nav-item" id="nav-data" data-nav="data">
    <i class="fa-solid fa-database"></i>
    <span>Data</span>
  </div>
</nav>

<!-- Entry point (ES Module) -->
<script type="module" src="./JS/ui.js"></script>

</body>
</html>
